# Created by: {{ AUTHOR }}
# Automatically generated by Pwntest on {{ DATETIME }}

name: Auto-regenerate Tests

on: [ "push" ]

jobs:
  create_tests:
    runs-on: {{ RUNS_ON }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Generate Tests
        uses: actions/setup-python@v3
        with:
          python-version: '3.10'
        run: |
          pip3 install ruaml.yaml # pwntest
          {%- if RUN_ON_CHANGED %}
          python3 pwntest/commandline/pwntest_action.py -r -m {{ MANIFEST_PATH }}
          # pwntest_action -r -m {{ MANIFEST_PATH }}
          {%- else %}
          python3 pwntest/commandline/pwntest_action.py -m {{ MANIFEST_PATH }}
          # pwntest_action -m {{ MANIFEST_PATH }}
          {% endif %}
